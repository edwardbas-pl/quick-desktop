#!/bin/bash
BROWSER='firefox'
TERMINAL='kitty'
FM='nemo' #GUI file manager
TFM='ranger' #terminal file manager
COMPOSITOR='picom'
CLIPBOARD_MANAGER='xclip'
OTHER=" numlockx qbittorrent gimp playerctl "
TERMINAL_APPS=" git rar dialog ranger gtop htop vim udisks2 "
GUI_backend="xclip spectacle pulseaudio pavucontrol feh w3m alsa-firmware apulse pulseaudio-alsa alsa-oss nodejs"
GUI=" lxsession nemo xorg polybar lxsession dunst lxappearance yad xdotool"
office_suite=" libreoffice galculator "
multimedia_player="mpv"

if [[ -f /usr/bin/zypper ]];
then
	sudo zypper --non-interactive install wget dialog curl
elif [[ -f /usr/bin/pacman ]];
then
	sudo pacman -Sy wget dialog curl --noconfirm
elif [[ -f /usr/bin/apt ]];
then
	sudo apt install wget dialog curl -y
fi


CHOICE=$(dialog --clear --title "Okno dialogowe Checklist" --backtitle "BASH" --checklist "Optional support for:" 11 40 4  GNOME "Minimal gnome-shell instalation" "off" dwm "dwm windowm manager by suckless.org" "off" bspwm "bspwm tiling window manager" "off" i3 "i3 tiling window manager" "off" --stdout)

#echo $CHOICE


DISTRO=$(hostnamectl | grep 'Operating System' | awk '{print $3 $4 $5}')
if [[ -f /usr/bin/zypper ]];
then
	echo "you are on $DISTRO"
	sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc
	sudo zypper --non-interactive addrepo https://download.opensuse.org/repositories/openSUSE:Factory/standard/openSUSE:Factory.repo
	sudo zypper --non-interactive addrepo https://download.opensuse.org/repositories/home:Simmphonie/openSUSE_Tumbleweed/home:Simmphonie.repo
	sudo zypper --non-interactive addrepo https://download.opensuse.org/repositories/home:rubo:pfetch/openSUSE_Tumbleweed/home:rubo:pfetch.repo
	sudo zypper --non-interactive addrepo https://download.opensuse.org/repositories/home:bfein/openSUSE_Tumbleweed/home:bfein.repo
	sudo zypper --non-interactive ar https://packages.microsoft.com/yumrepos/ms-teams/ ms-teams
	sudo zypper --non-interactive refresh
	sudo npm install p3x-onenote
	sudo zypper --non-interactive install slick-greeter python-pywal lightdm xkill dialog wget curl xorg-x11-server teams npm unrar pfetch i3lock-color $TERMINAL $BROWSER $FM $TFM $COMPOSITOR $CLIPBOARD_MANAGER $OTHER $TERMINAL_APPSG $UI_backend $GUI $office_suite $multimedia_player	

	if [[ $CHOICE == *dwm* ]]	
	then 
		echo 'dwm'
	fi

	if [[ $CHOICE == *bspwm* ]]
	then 
		echo 'bspwm'
	fi


	if [[ $CHOICE == *i3* ]]
	then 
		echo 'i3'
	fi
	sudo systemctl enable --now lightdm

elif [[ -f /usr/bin/pacman ]];
then
	echo "you are on $DISTRO"

elif [[ -f /usr/bin/apt ]];
then
	echo "you are on $DISTRO"
	if [[ $DISTRO ==  *Debian*  ]];
	then

		echo "debian based"

	fi
fi

#if gnome is installed it will also install some extensions



#deploy my dotfiles
cd
git clone https:://github.com/edwardbas-pl/backup
cd backup
./Restore
